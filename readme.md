[ä¸­æ–‡](./README.md)ã€€|ã€€[English](./README_en.md) 

[Gitee](https://gitee.com/haujet/audio-video-resync)ã€€|ã€€[Github](https://github.com/HaujetZhao/audio-video-resync) 

# Audio-Video-Resync

## â­ ç®€ä»‹

åŠŸèƒ½ï¼š é€šè¿‡æ³¢å½¢æ¯”è¾ƒï¼Œå¾—åˆ°ä¸¤ä¸ªéŸ³é¢‘çš„æ—¶é—´æˆ³åç§»å€¼ï¼Œåˆæˆæ–°è§†é¢‘ã€‚ 

å¤§ç™½è¯ï¼šå°†è§†é¢‘ä¸­çš„å£°éŸ³æ›¿æ¢æˆå½•éŸ³ç¬”ä¸­çš„å£°éŸ³ï¼Œå¹¶è‡ªåŠ¨å¯¹é½ã€‚

ç”¨é€”ç¤ºä¾‹ï¼š å½•åˆ¶ vlogæ—¶ï¼Œä½¿ç”¨å½•éŸ³ç¬”å®ç°æ›´å¥½çš„æ”¶å£°ï¼Œå†å°†ç›¸æœºçš„è§†é¢‘ä¸å½•éŸ³ç¬”çš„å½•éŸ³åŒæ­¥ã€‚

ä¸‹è½½ï¼š

- å‘è¡Œç‰ˆä¸‹è½½åœ°å€ï¼š [Releases](../../releases) 

## ğŸ“ èƒŒæ™¯

æœ€è¿‘äº†è§£äº†å½•éŸ³ç¬”ï¼ŒçŸ¥é“äº†åœ¨ vlog ä¸­çš„ä¸€ä¸ªæŠ€å·§ï¼š

> * ä½¿ç”¨ç›¸æœºå½•è§†é¢‘ï¼Œå¾—åˆ°é«˜è´¨é‡çš„è§†é¢‘
>
> * å°†å½•éŸ³ç¬” / æ‰‹æœºå¸¦åœ¨èº«ä¸Šï¼Œå½•éŸ³ï¼Œå¾—åˆ°é«˜è´¨é‡çš„æ”¶å£°
>
> åæœŸå°† **ç›¸æœºçš„è§†é¢‘** å’Œ **å½•éŸ³ç¬”çš„å½•éŸ³** å¯¹é½ï¼Œè½¬æ¢éŸ³è½¨ï¼Œå¾—åˆ°ç”»é¢å’ŒéŸ³è´¨éƒ½å®Œç¾çš„è§†é¢‘ã€‚

ä½†æ˜¯è¿™ä¸ªæ›¿æ¢è¿‡ç¨‹æ˜¯æ¯”è¾ƒç¹ççš„ï¼Œå³ä¾¿ Prã€Davinci è¿™äº›ä¸“ä¸šè½¯ä»¶ä¸­æœ‰éŸ³é¢‘å¯¹é½åŠŸèƒ½ï¼Œä½†å…‰æ‰“å¼€è¿™äº›è½¯ä»¶ï¼Œè¿˜æ²¡å¼€å§‹å‰ªè¾‘å°±å¤Ÿå¡çš„äº†ï¼Œå¯¼å‡ºæ—¶è¿˜è¦é‡æ–°å‹åˆ¶ï¼Œå®åœ¨æ˜¯ä¸å¥½ç”¨ã€‚å°±ä»¥è¾¾èŠ¬å¥‡ä¸ºä¾‹ï¼Œç‰¹åˆ«åƒæ˜¾å¡ï¼Œæˆ‘è¿™ä¸ªç‹¬æ˜¾ç¬”è®°æœ¬ï¼Œä¸å‰ªè§†é¢‘ï¼Œå°±å•å•æ‰“å¼€è¾¾èŠ¬å¥‡ï¼Œåˆ‡æ¢æ“ä½œç•Œé¢éƒ½å¡ã€‚

æˆ‘å°±æƒ³ï¼Œå‡å¦‚ä»¥åç»™å¥³æœ‹å‹æ‹è§†é¢‘ï¼Œç”¨å½•éŸ³ç¬”è¿™ç§æ–¹å¼è·å¾—å®Œç¾çš„æ”¶å£°åï¼Œç®€å•æ›¿æ¢éŸ³é¢‘è¿™ä»¶å°äº‹ï¼Œéœ€è¦ä¸€ä¸ªç®€å•çš„ä¸€æ­¥æ“ä½œï¼Œæˆ‘éœ€è¦ä¸€ä¸ªè½»é‡çš„å·¥å…·ï¼Œåªä¿®æ”¹éŸ³é¢‘ï¼Œå¯¼å‡ºæ— æŸçš„è§†é¢‘ã€‚

ç»è¿‡æœç´¢ï¼Œåœ¨ github ä¸Šï¼Œæˆ‘æ‰¾åˆ°äº† [BBC çš„ audio-offset-finder](https://github.com/bbc/audio-offset-finder)ï¼Œå¯ä»¥åˆ†æä¸¤æ®µå£°éŸ³ä¹‹é—´çš„åç§»æ—¶é—´ï¼Œä½†å®ƒæ˜¯ç”¨ python2.7 å†™çš„ï¼Œç„¶åæˆ‘æ‰¾åˆ°äº† [abramhindle æ•™æˆçš„](https://github.com/abramhindle) çš„ [audio-offset-finder fork](https://github.com/abramhindle/audio-offset-finder) ï¼Œä»–ç”¨ python3 è¿›è¡Œäº†é‡æ–°å®ç°å’Œä¼˜åŒ–ï¼Œ[benkno çš„ audio-offset-finder fork]( https://github.com/benkno/audio-offset-finder) åˆåšäº† bash å¤„ç†çš„ä¼˜åŒ–ã€‚

ç»ä¸Šè¿°ä¸¤ä¸ª fork çš„ä¼˜åŒ–ï¼Œaudio-offset-finder çš„å¤§æ¦‚åŸç†å°±æˆäº†ï¼š

> å–éŸ³é¢‘ 1 çš„å¤§çº¦å‰ 30 ç§’ç‰‡æ®µï¼Œå¾—åˆ°ç‰¹å¾å€¼ï¼Œåœ¨éŸ³é¢‘ 2 çš„å‰ 15 åˆ†é’Ÿç‰‡æ®µä¸­ï¼Œå¯»æ‰¾ç‰¹å¾æœ€æ¥è¿‘çš„åœ°æ–¹ï¼Œå¾—åˆ°åç§»å€¼ï¼Œå†æ›¿æ¢éŸ³é¢‘ï¼Œç”Ÿæˆæ–°è§†é¢‘ã€‚

ä¸Šè¿°çš„ç¼ºç‚¹æ˜¯ï¼šå¦‚æœæ—¶é—´ä½ç§»è¶…è¿‡ 15 åˆ†é’Ÿï¼Œå°±åˆ†æä¸å¥½äº†ã€‚

æ‰€ä»¥æˆ‘åšäº†äº›æ”¹è¿›ï¼š

> ä¾æ¬¡å–éŸ³é¢‘ 1 ã€éŸ³é¢‘ 2ã€â€¦â€¦éŸ³é¢‘ n çš„å¤§çº¦å‰ 20 - 50 ç§’ç‰‡æ®µï¼Œå¾—åˆ°ç‰¹å¾å€¼ï¼Œåœ¨éŸ³é¢‘ 2 ï¼Œä»¥ 15 åˆ†é’Ÿä¸ºä¸€å°æ®µï¼Œå¯¹æ¯ä¸€æ®µä¾æ¬¡å¯»æ‰¾ç‰¹å¾æœ€æ¥è¿‘çš„åœ°æ–¹ï¼Œç›´åˆ°æ‰¾åˆ°åˆæ ¼çš„ç›¸ä¼¼ç‚¹ï¼Œå¾—åˆ°åç§»å€¼ï¼Œå†æ›¿æ¢éŸ³é¢‘ï¼Œç”Ÿæˆæ–°è§†é¢‘ã€‚

æ‰€ä»¥ä½ å¯ä»¥ç”¨å½•éŸ³ç¬”ä¸€æ¬¡å½•ä¸Šå¥½å‡ å°æ—¶çš„éŸ³é¢‘ï¼Œä¸­é€”ç”¨ç›¸æœºå½•ä¸Šå‡ æ®µè§†é¢‘ï¼Œç”¨ä¸€æ¡å‘½ä»¤ï¼Œå°†è¿™äº›è§†é¢‘çš„éŸ³é¢‘ï¼Œå…¨éƒ¨æ›¿æ¢æˆå½•éŸ³ç¬”éŸ³é¢‘ä¸­çš„ç‰‡æ®µï¼š

```
audio-video-resync å½•éŸ³ç¬”éŸ³é¢‘.mp3 ç›¸æœºè§†é¢‘1.mp4 ç›¸æœºè§†é¢‘2.mp4 ç›¸æœºè§†é¢‘3.mp4
```

## âœ¨ ç‰¹æ€§

ä¸¤ç§è¿è¡Œæ–¹å¼ï¼š

* ç›´æ¥è¿è¡Œï¼Œæ–‡å­—å¼•å¯¼
* å‘½ä»¤è¡Œè¿è¡Œï¼Œä¸€æ¡å‘½ä»¤å¤„ç†å¤šä¸ªè§†é¢‘

## ğŸ› ï¸ å®‰è£…

### ğŸ“¦ å‘è¡Œç‰ˆ

éœ€è¦æå‰å®‰è£…ä¸Š FFmpeg

å·²ä¸º Windows 64 ä½æ‰“åŒ…æˆå¯ç›´æ¥åŒå‡»è¿è¡Œçš„åŒ…ï¼Œè¯·åˆ° [æœ¬ä»“åº“çš„ Releases](../../releases) ç•Œé¢ä¸‹è½½ã€‚å°† 7z å‹ç¼©åŒ…è§£å‹åï¼Œæ–‡ä»¶å¤¹å†…æœ‰ä¸€ä¸ª exe æ–‡ä»¶ï¼ŒåŒå‡»å³å¯è¿è¡Œï¼š

![exeæ–‡ä»¶](assets/exeæ–‡ä»¶.png) 

ä¹Ÿå¯ä»¥ä»å‘½ä»¤è¡Œè¿è¡Œï¼š

```
_AudioSyncVideo.exe å½•éŸ³ç¬”éŸ³é¢‘.mp3 ç›¸æœºè§†é¢‘1.mp4 ç›¸æœºè§†é¢‘2.mp4
```

å…¶ä»–ç³»ç»Ÿéœ€è¦ä»æºä»£ç ä½¿ç”¨

### âš™ï¸ ç”¨ pip å®‰è£…è¿è¡Œ

éœ€è¦æå‰å®‰è£…ä¸Š FFmpeg å’Œ Python3

#### ç”¨ pip ä» pypi å®‰è£…

è¿˜æœªä¸Šä¼ 

#### ç”¨ pip ä»æºä»£ç å®‰è£…

å°†ä»“åº“å…‹éš†ä¸‹æ¥ï¼Œè¿›å…¥ä»“åº“æ–‡ä»¶å¤¹ï¼Œè¿è¡Œï¼š

```
pip install .
```

å°±å®‰è£…ä¸Šäº†ã€‚ç„¶åå°±å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ç”¨äº†ï¼š

```
audio-video-resync
```

### ğŸ“„ ä»æºä»£ç ç›´æ¥è¿è¡Œ

å°†ä»“åº“å…‹éš†ä¸‹æ¥ï¼Œè¿›å…¥ä»“åº“æ–‡ä»¶å¤¹ï¼Œå…ˆå®‰è£…ä¾èµ–åº“ï¼š

```
pip install -r requirements.txt
```

ç„¶åå°±å¯ä»¥ä»¥æ¨¡å—çš„æ–¹å¼è¿è¡Œï¼š

```
python -m audio_video_resync
```



## ğŸ’¡ ä½¿ç”¨

```
python -m audio_video_resync
```

```shell
python -m audio_video_resync å½•éŸ³ç¬”éŸ³é¢‘.mp3 ç›¸æœºè§†é¢‘1.mp4 ç›¸æœºè§†é¢‘2.mp4 ç›¸æœºè§†é¢‘3.mp4
```

ç¬¬ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥è¿è¡Œï¼Œä¼šæœ‰æ–‡å­—æç¤ºå¼•å¯¼ä½ ï¼š

```
> python -m audio_video_resync
æ­£åœ¨åˆå§‹åŒ–ï¼Œè¯·ç¨ç­‰

ä½ æ²¡æœ‰è¾“å…¥ä»»ä½•éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶ï¼Œå› æ­¤è¿›å…¥æ–‡å­—å¼•å¯¼ã€‚
ç¨‹åºçš„ç”¨å¤„ä¸»è¦æ˜¯å°†è§†é¢‘ä¸­çš„éŸ³é¢‘æ›¿æ¢ä¸ºå…¶å®ƒå½•éŸ³è®¾å¤‡ä¸­çš„éŸ³é¢‘ï¼Œä¾‹å¦‚ï¼š
  * ä½¿ç”¨ç›¸æœºå½•åƒ
  * ä½¿ç”¨å½•éŸ³ç¬”ã€æ‰‹æœºéšèº«å½•éŸ³
  * å°†ç›¸æœºæœºå†…éº¦å…‹é£å½•åˆ¶çš„å£°éŸ³ï¼Œæ›¿æ¢æˆå½•éŸ³ç¬”ä¸­çš„é«˜è´¨é‡æ”¶éŸ³
å½•éŸ³ç¬”å½•åˆ¶çš„æ—¶é—´ä¸€èˆ¬è¦é•¿äºè§†é¢‘ç‰‡æ®µçš„é•¿åº¦
å› æ­¤ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºï¼š
    åœ¨éŸ³é¢‘ï¼ˆæŸ¥æ‰¾èŒƒå›´ï¼‰ä¸­æŸ¥æ‰¾è§†é¢‘å£°éŸ³ï¼ˆæŸ¥æ‰¾ç›®æ ‡ï¼‰çš„åç§»ï¼Œå†å°†è§†é¢‘ä¸­çš„å£°éŸ³æ›¿æ¢
æ‰€ä»¥è¦å…ˆæŒ‡å®šèŒƒå›´ï¼ˆéŸ³é¢‘æ–‡ä»¶ï¼‰ï¼Œå†æŒ‡å®šç›®æ ‡ï¼ˆè§†é¢‘æ–‡ä»¶ï¼‰


é¦–å…ˆè¾“å…¥éŸ³é¢‘æ–‡ä»¶ï¼ˆæŸ¥æ‰¾èŒƒå›´ï¼‰
è¯·è¾“å…¥æ–‡ä»¶è·¯å¾„ æˆ– ç›´æ¥æ‹–å…¥ï¼šéŸ³é¢‘.mp3

å†è¾“å…¥è§†é¢‘æ–‡ä»¶ï¼ˆæŸ¥æ‰¾ç›®æ ‡ï¼‰
è¯·è¾“å…¥æ–‡ä»¶è·¯å¾„ æˆ– ç›´æ¥æ‹–å…¥ï¼šè§†é¢‘.mp4

æ€»å…±æœ‰ 1 ä¸ªè§†é¢‘éœ€è¦å¯¹é½ï¼Œæ­£åœ¨å¯¹é½ç¬¬ 1 ä¸ªï¼šè§†é¢‘.mp4
```

ç¬¬äºŒç§æ–¹å¼æ˜¯å‘½ä»¤è¡Œä¼ é€’å‚æ•°è¿è¡Œï¼Œå¯ä»¥ä¸€æ¬¡ä¼ é€’ **ä¸€ä¸ªéŸ³é¢‘** å’Œ **å¤šä¸ªè§†é¢‘** ï¼š

```
> python -m audio_video_resync -h
usage: audio_video_resync [-h] [--version] [--offset Minutes]
                   [--trim Minutes] [--sr SampleRate]
                   [--format Format] [--not-generate] [--plotit]
                   Audio Video [Video ...]

åŠŸèƒ½ï¼š é€šè¿‡æ³¢å½¢æ¯”è¾ƒï¼Œå¾—åˆ°ä¸¤ä¸ªéŸ³é¢‘çš„æ—¶é—´æˆ³åç§»å€¼ï¼Œåˆæˆæ–°è§†é¢‘ã€‚ ç”¨é€”ç¤ºä¾‹ï¼š å½•åˆ¶ vlog
æ—¶ï¼Œä½¿ç”¨å½•éŸ³ç¬”å®ç°æ›´å¥½çš„æ”¶å£°ï¼Œå†å°†ç›¸æœºçš„è§†é¢‘ä¸å½•éŸ³ç¬”çš„å½•éŸ³åŒæ­¥ã€‚

positional arguments:
  Audio             å¤–ç½®éŸ³é¢‘ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è¿›è¡ŒåŒ¹é…
  Video             å¯¹æ­¤è§†é¢‘æ–‡ä»¶åŒ¹é…åç§»ï¼ˆå¯ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ–‡ä»¶ï¼‰

optional arguments:
  -h, --help        show this help message and exit
  --version         show program's version number and exit
  --offset Minutes  å¿½ç•¥å¤–ç½®éŸ³é¢‘çš„å‰å¤šå°‘åˆ†é’Ÿ (default: 0)
  --trim Minutes    åªä½¿ç”¨éŸ³é¢‘æ–‡ä»¶çš„å‰å¤šå°‘åˆ†é’Ÿè¿›è¡Œåˆ†æ (default: 15)
  --sr SampleRate   é‡æ–°é‡‡æ ·è¿›è¡Œåˆ†ææ—¶ï¼Œä½¿ç”¨ä»€ä¹ˆé‡‡æ ·ç‡ (default: 16000)
  --format Format   è¾“å‡ºæ–‡ä»¶çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼šmp4ã€mkv (default: mp4)
  --not-generate    ä¸è¦è¿è¡Œ FFMPEG ç”ŸæˆåŒæ­¥å¥½çš„æ–°è§†é¢‘ (default: False)
  --plotit          å±•ç¤ºç›¸å…³æ€§è®¡ç®—ç»“æœçš„å›¾ç¤º (default: False)
```

## ğŸ”‹ æ‰“èµ

æœ¬è½¯ä»¶å®Œå…¨å¼€æºï¼Œç”¨çˆ±å‘ç”µï¼Œå¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥ä»¥æ‰“èµçš„æ–¹å¼ä¸ºæˆ‘å……ç”µï¼š

![sponsor](assets/Sponsor.png)

## ğŸ˜€ äº¤æµ

å¦‚æœæœ‰è½¯ä»¶æ–¹é¢çš„åé¦ˆå¯ä»¥æäº¤ issuesï¼Œæˆ–è€…åŠ å…¥ [QQ ç¾¤ï¼š1146626791](https://qm.qq.com/cgi-bin/qm/qr?k=DgiFh5cclAElnELH4mOxqWUBxReyEVpm&jump_from=webapi) 